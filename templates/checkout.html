{% load static %}
{% load crispy_forms_tags %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- CSS -->
        <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
        <link rel="stylesheet" href="{% static 'css/style.css' %}">
  
    </head>
    <body>
    <div>
    <nav class="navbar navbar-light bg-white justify-content-center zz-nav-header">
    <a class="navbar-brand" href="#">
        <img src="zeus logo (1).png"  alt="" loading="lazy">
    </a>
    </nav>

      
            <nav class="nav my-2 my-lg-2 bg-light d-flex justify-content-start">
                <a class="nav-link text-dark my-4 " href="{% url 'cart' %}"> <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-left" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
                  </svg> Return to Cart</a>
              </nav>

       <!-- shippinf detail section     -->
       <div class="container">

        <div class="accordion mb-5 my-5" id="accordionExample">
          <div class="card">
            <div class="card-header" id="headingOne">
              <h6 class="mb-0">
                <a class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseThree">
                  Customer Detail
                </a>
              </h6>
            </div>
        
            <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
              <div class="card-body">
                <form>
                  <fieldset>
                    <legend>Contact Information</legend>
                    <div class="form-group">
                      <label for="formGroupExampleInput">Full Name</label>
                      <input type="text" class="form-control" id="formGroupExampleInput" placeholder="{{user.firstname}}">
                    </div>
                    <div class="form-group">
                      <label for="formGroupExampleInput2">Email Address</label>
                      <input type="text" class="form-control" id="formGroupExampleInput2" placeholder="{{user.email}}">
                    </div>
                    <div class="form-group">
                      <label for="formGroupExampleInput">Mobile Number</label>
                      <input type="text" class="form-control" id="formGroupExampleInput" placeholder="Example input placeholder">
                    </div>
                  </fieldset>
                  <fieldset>
                    <legend>Shipping Address</legend>
                    <div class="form-group">
                      <label for="formGroupExampleInput">Address</label>
                      <input type="text" class="form-control" id="formGroupExampleInput" placeholder="Example input placeholder">
                    </div>
                    <div class="form-group">
                      <label for="formGroupExampleInput2">City</label>
                      <input type="text" class="form-control" id="formGroupExampleInput2" placeholder="Another input placeholder">
                    </div>
                    <div class="form-group">
                      <label for="formGroupExampleInput">State</label>
                      <input type="text" class="form-control" id="formGroupExampleInput" placeholder="Example input placeholder">
                    </div>
                  </fieldset>
                </form>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-header" id="headingTwo">
              <h6 class="mb-0">
                <a class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseThree">
                  Shipping Method
                </a>
              </h6>
            </div>
            <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
              <div class="card-body">
                Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-header" id="headingThree">
              <h6 class="mb-0">
                <a class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                  Order Summary 
                </a>
              </h6>
            </div>
            <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
              <div class="card-body">
                <table class="table">
                  <thead>
                    <tr>
                      <th scope="col"></th>
                      <th scope="col">Product</th>
                      <th scope="col">Quantity</th>
                      <th scope="col">Price</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for order in orders %}
                    <tr>
                      <td><img src="{{order.cart.items.image.url}}" class=" img-fluid " alt="..." width="100" height="100"></td>
                      <td>{{order.cart.items.name}}</td>
                      <td>{{order.cart.qty}}</td>
                      <td>{{order.cart.items.price}}</td>
                      
                    </tr>
                    <tr>
                      <td  colspan="2"></td>
                      <td>Total</td>
                      <td id="total">
                      {{order.total_cost}}
                    </td>
                  </tr>
                  {% endfor %}
             
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <button class="btn btn-primary btn-block my-5" type="button" id="pay">
          Proceed To Payment Method
        </button>
       </div>

       <!-- <div class="row p-5 m-0">
         <div class="cols-6">
        <div class="card  mt-4 p-2" style="width: 710px; height: 189px;">
          <div class="card-body">
              <h5 class="card-title">Contact Information</h5>
             <div class="container my-4">
                <div class="row">
                    <div class="col-md-2">
                      <label for="inlineFormInputName2">Email</label>
                    </div>
  
                    <div class="col-md-9">
                      <input type="text" class="form-control mb-2 mr-sm-2" id="email" placeholder="{{user.email}}" value="{{user.email}}" />
  
                    </div>
  
                </div>

             </div>
              
          </div>
      </div>    

      <div class="card mt-4 p-2" style="width: 710px; height: 600px;">
        <div class="card-body">
            <h5 class="card-title">Shipping Address</h5>
           <div class="container my-4">
              <div class="row">
                  <div class="col-md-2">
                    <label for="inlineFormInputName2"> First Name</label>
                  </div>

                  <div class="col-md-9">
                    <input type="text" class="form-control mb-2 mr-sm-2" id="inlineFormInputName2" />

                  </div>

              </div>

              <div class="row">
                <div class="col-md-2">
                  <label for="inlineFormInputName2">Last Name</label>
                </div>

                <div class="col-md-9">
                  <input type="text" class="form-control mb-2 mr-sm-2" id="inlineFormInputName2" />

                </div>

            </div>

            <div class="row">
                <div class="col-md-2">
                  <label for="inlineFormInputName2">Address</label>
                </div>

                <div class="col-md-9">
                  <input type="text" class="form-control mb-2 mr-sm-2" id="inlineFormInputName2" />

                </div>

            </div>

            <div class="row">
                <div class="col-md-2">
                  <label for="inlineFormInputName2">State</label>
                </div>

                <div class="col-md-9">
                  <input type="text" class="form-control mb-2 mr-sm-2" id="inlineFormInputName2" />

                </div>

            </div>
            <div class="row">
                <div class="col-md-2">
                  <label for="inlineFormInputName2">City</label>
                </div>

                <div class="col-md-9">
                  <input type="text" class="form-control mb-2 mr-sm-2" id="inlineFormInputName2" />

                </div>

            </div>
            
            <div class="row">
                <div class="col-md-2">
                  <label for="inlineFormInputName2">Phone No.</label>
                </div>

                <div class="col-md-9">
                  <input type="text" class="form-control mb-2 mr-sm-2" id="inlineFormInputName2" />

                </div>

            </div>

            continue from here

           </div>

            
        </div>
    </div>   

    <div class="card  mt-5 mb-4 p-2" style="width: 710px; height: 189px;">
        <div class="card-body">
            <h5 class="card-title">Shipping Method</h5>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                <label class="form-check-label" for="defaultCheck1">
                  FLAT RATE - N1,200
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                <label class="form-check-label" for="defaultCheck1">
                  CUSTOMER PICKUP - N1,200
                </label>
              </div>
        </div>
    </div>

    <button type="button" id="pay" class="btn btn-primary w-50 mx-auto  mt-2 mb-4">Continue to Payement</button>        


         </div>

         <div class="cols-6">

          
      <div class="card bg-light mt-4 ml-4" style="width: 474px; height: 550px;">
        <div class="card-body">
            <div class="container">
              {% for order in orders %}

              <img src="{{order.cart.items.image.url}}" class="card-img-top img-fluid w-50 h-50" alt="...">
                <h5 class="card-title my-4">{{order.cart.items.name}}</h5>
                
                
                <div class="row my-4">
                    <div class="col-4">
                        <p class="card-text">Qty:</p>
                    </div>

                    <div class="col-6">
                        <p class="card-text">{{order.cart.qty}}</p>
                    </div>

                </div>

                <div class="row my-4">
                    <div class="col-4">
                        <p class="card-text">Unit price</p>
                    </div>

                    <div class="col-6">
                        <p class="card-text">{{order.cart.items.price}}</p>
                    </div>

                </div>
                <div class="row my-4">
                    <div class="col-4">
                        <p class="card-text">Sub Total</p>
                    </div>

                    <div class="col-6">
                        <p class="card-text">{{order.total_cost}}</p>
                    </div>

                </div>
                <div class="row my-4">
                    <div class="col-4">
                        <p class="card-text">Shipping fee</p>
                    </div>

                    <div class="col-6">
                        <p class="card-text">0.00</p>
                    </div>

                </div>

                <div class="row my-4">
                    <div class="col-4">
                        <p class="card-text">Grand Total:</p>
                    </div>

                    <div class="col-6">
                        <h4 class="card-text" id="total">{{order.total_cost}}</h4>
                    </div>

                </div>

            </div>


              {% endfor %}
          </div>
    </div>      



        </div>

       </div>
     -->

   
    <footer class="zz-footer-detail p-2">
      <div class="d-flex justify-content-between">
       <p class="my-4">&copy; 2010-2020 Privacy-Terms</p>
      <div class="d-flex justify-content-end">
       <img src="{% static 'img/master.png' %}" class="my-4" alt="">
       <img src="{% static 'img/vis.png' %}" class="my-4" alt="">
      </div>
      </div>

    </footer>
   

    
        <!-- jQuery and JS bundle w/ Popper.js -->
<script src="{% static 'js/jquery-3.5.1.min.js' %}" ></script>
<script src="{% static 'js/bootstrap.bundle.js' %}" ></script>
<script src="{% static 'js/sweetalert2.all.min.js' %}" ></script>
        <script type='text/javascript'>
        $(document).ready(function(){
          var email = '{{user.email}}'
          var amount = $('#total').text();
          var token = '{{csrf_token}}';
          console.log(amount);

          $('#pay').on('click', function(){
            var item = {
              'email': email,
              'amount': amount
            }

            $.ajax({
              headers: { "X-CSRFToken": token },
              url:'{% url "payement" %}',
              type: 'POST',
              data: item,
              dataType: 'json',
              success: function(response){
                var res = response['data'];
                var url = res.authorization_url;
                window.location.href = url;

              },
              error: function(response){
                console.log(response);
              }
            });

          });


        });

        </script>
    </body>
</html>